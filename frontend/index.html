<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="SignUpFlow - Volunteer scheduling made simple. AI-powered sign-up management for churches, sports leagues, and non-profits.">
    <meta name="keywords"
        content="volunteer signup, church scheduling, sports league management, volunteer coordination, AI scheduling">
    <meta name="author" content="SignUpFlow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://signupflow.io/">
    <meta property="og:title" content="SignUpFlow - Volunteer Scheduling Made Simple">
    <meta property="og:description"
        content="AI-powered sign-up management for churches, sports leagues, and non-profits.">
    <meta property="og:image" content="/images/signupflow-logo.svg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://signupflow.io/">
    <meta property="twitter:title" content="SignUpFlow - Volunteer Scheduling Made Simple">
    <meta property="twitter:description"
        content="AI-powered sign-up management for churches, sports leagues, and non-profits.">

    <title data-i18n="schedule.title">SignUpFlow - My Schedule</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="canonical" href="https://signupflow.io/">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Modern Styles -->
    <link rel="stylesheet" href="/css/styles-modern.css?v=9">
    <link rel="stylesheet" href="/css/solver.css?v=9">
    <link rel="stylesheet" href="/css/mobile.css">
    <link rel="stylesheet" href="/css/sms.css">
    <script src="/js/debug.js"></script>
    <script src="/js/toast.js"></script>
    <script src="/js/form-validation.js"></script>
    <script src="/js/conflict-detection.js"></script>
    <script src="/js/search-filter.js"></script>
    <script src="/js/auth-fetch.js"></script>
    <script src="/js/router.js"></script>
    <script src="/js/i18n.js"></script>

    <script src="/js/recaptcha.js"></script>

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "SignUpFlow",
        "description": "Volunteer scheduling made simple. AI-powered sign-up management for churches, sports leagues, and non-profits.",
        "url": "https://signupflow.io",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "AI-powered scheduling",
            "Volunteer sign-up management",
            "Availability tracking",
            "Calendar export",
            "Multi-language support"
        ]
    }
    </script>
</head>

<body>
    <div class="container">
        <!-- Onboarding Screen -->
        <div id="onboarding-screen" class="screen">
            <div class="welcome-card">
                <div class="language-selector-top">
                    <select id="welcome-language" onchange="changeLanguage(this.value)" class="language-dropdown">
                        <option value="en">English</option>
                        <option value="es">Espa√±ol</option>
                        <option value="zh-CN">‰∏≠Êñá</option>
                        <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                        <option value="tl">Tagalog</option>
                        <option value="vi">Ti·∫øng Vi·ªát</option>
                    </select>
                </div>
                <h1><img src="/images/signupflow-logo.svg" alt="SignUpFlow"
                        style="height: 60px; vertical-align: middle; margin-right: 20px;"> <span
                        data-i18n="auth.welcome_to_signupflow">Welcome to SignUpFlow</span></h1>
                <p class="welcome-text" data-i18n="auth.welcome_subtitle">Join your organization and manage your
                    schedule effortlessly</p>

                <div class="onboarding-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3 data-i18n="auth.join_organization">Join an Organization</h3>
                        <p data-i18n="auth.join_organization_desc">Find your church, league, or team</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3 data-i18n="schedule.availability">Set Your Availability</h3>
                        <p data-i18n="schedule.availability_desc">Block off times when you're unavailable</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3 data-i18n="schedule.view_schedule">View Your Schedule</h3>
                        <p data-i18n="schedule.view_schedule_desc">See your assignments and export to calendar</p>
                    </div>
                </div>

                <button class="btn btn-primary btn-large" onclick="startOnboarding()" data-i18n="auth.get_started">Get
                    Started ‚Üí</button>
                <p class="help-text"><span data-i18n="auth.already_have_account">Already have an account?</span> <a
                        href="#" onclick="showLogin(); return false;" data-i18n="auth.sign_in_link">Sign in</a></p>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="login-screen" class="screen hidden">
            <div class="form-container">
                <div class="language-selector-top">
                    <select id="login-language" onchange="changeLanguage(this.value)" class="language-dropdown">
                        <option value="en">English</option>
                        <option value="es">Espa√±ol</option>
                        <option value="zh-CN">‰∏≠Êñá</option>
                        <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                        <option value="tl">Tagalog</option>
                        <option value="vi">Ti·∫øng Vi·ªát</option>
                    </select>
                </div>
                <h2 data-i18n="auth.sign_in_title">Sign In</h2>
                <p class="subtitle" data-i18n="auth.welcome_back_subtitle">Welcome back! Sign in to access your schedule
                </p>

                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label data-i18n="common.labels.email">Email Address</label>
                        <input type="email" id="login-email" data-i18n-placeholder="auth.placeholder_email"
                            placeholder="your@email.com" autofocus>
                    </div>

                    <div class="form-group">
                        <label data-i18n="auth.password">Password</label>
                        <input type="password" id="login-password" data-i18n-placeholder="auth.placeholder_password"
                            placeholder="Enter your password">
                    </div>

                    <div id="login-error" class="error-message hidden" role="alert"></div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large" data-i18n="auth.sign_in">Sign In
                            ‚Üí</button>
                    </div>

                    <p class="help-text" style="text-align: center; margin-top: 10px;">
                        <a href="#" onclick="showForgotPassword(); return false;"
                            data-i18n="auth.forgot_password">Forgot password?</a>
                    </p>
                </form>

                <p class="help-text"><span data-i18n="auth.no_account">Don't have an account?</span> <a href="#"
                        onclick="startOnboarding(); return false;"><span data-i18n="auth.signup_link">Sign up</span></a>
                </p>
            </div>
        </div>

        <!-- Forgot Password Screen -->
        <div id="forgot-password-screen" class="screen hidden">
            <div class="form-container">
                <h2 data-i18n="auth.reset_password">Reset Password</h2>
                <p class="subtitle" data-i18n="auth.reset_password_subtitle">Enter your email address and we'll send you
                    a reset link</p>

                <form onsubmit="handleForgotPassword(event)">
                    <div class="form-group">
                        <label data-i18n="common.labels.email">Email Address</label>
                        <input type="email" id="forgot-email" data-i18n-placeholder="auth.placeholder_email"
                            placeholder="your@email.com" required autofocus>
                    </div>

                    <div id="forgot-error" class="error-message hidden"></div>
                    <div id="forgot-success" class="success-message hidden"></div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large" data-i18n="auth.send_reset_link">Send
                            Reset Link ‚Üí</button>
                    </div>
                </form>

                <p class="help-text"><span data-i18n="auth.remember_password">Remember your password?</span> <a href="#"
                        onclick="showLogin(); return false;" data-i18n="auth.back_to_login">Back to login</a></p>
            </div>
        </div>

        <!-- Reset Password Screen -->
        <div id="reset-password-screen" class="screen hidden">
            <div class="form-container">
                <h2 data-i18n="auth.create_new_password">Create New Password</h2>
                <p class="subtitle" data-i18n="auth.enter_new_password">Enter your new password below</p>

                <form onsubmit="handleResetPassword(event)">
                    <input type="hidden" id="reset-token">

                    <div class="form-group">
                        <label data-i18n="auth.new_password">New Password</label>
                        <input type="password" id="reset-password" data-i18n-placeholder="auth.placeholder_new_password"
                            placeholder="Enter new password" minlength="8" required autofocus>
                        <p class="help-text" data-i18n="auth.password_requirements">At least 8 characters</p>
                    </div>

                    <div class="form-group">
                        <label data-i18n="auth.confirm_password">Confirm Password</label>
                        <input type="password" id="reset-password-confirm"
                            data-i18n-placeholder="auth.placeholder_confirm_password" placeholder="Confirm new password"
                            minlength="8" required>
                    </div>

                    <div id="reset-error" class="error-message hidden"></div>
                    <div id="reset-success" class="success-message hidden"></div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large"
                            data-i18n="auth.reset_password_button">Reset Password ‚Üí</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Join Organization (Invitation-Based) -->
        <div id="join-screen" class="screen hidden">
            <div class="form-container">
                <h2 data-i18n="auth.join_org_invitation">Join with Invitation</h2>
                <p class="subtitle" data-i18n="auth.enter_invitation_code">Enter the invitation code you received via
                    email</p>

                <!-- Invitation Token Entry -->
                <form onsubmit="verifyInvitationToken(event)" id="invitation-form">
                    <div class="form-group">
                        <label data-i18n="auth.invitation_token">Invitation Code</label>
                        <input type="text" id="invitation-token"
                            data-i18n-placeholder="auth.placeholder_invitation_token"
                            placeholder="Enter your invitation code" required autofocus>
                        <p class="help-text" data-i18n="auth.invitation_help">This was sent to your email by your
                            organization administrator</p>
                    </div>
                    <div id="invitation-error" class="error-message hidden"></div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large"
                            data-i18n="auth.verify_invitation">Verify Invitation ‚Üí</button>
                    </div>
                </form>

                <div class="divider">
                    <span data-i18n="common.or">or</span>
                </div>

                <button class="btn btn-secondary" onclick="showCreateOrg()"><span
                        data-i18n="auth.create_new_organization">Create New Organization</span></button>

                <div id="create-org-section" class="hidden">
                    <h3 data-i18n="auth.create_org">Create Your Organization</h3>
                    <p class="help-text" data-i18n="auth.first_user_becomes_admin">You'll be the first member and
                        administrator</p>
                    <form onsubmit="createAndJoinOrg(event)">
                        <input type="text" id="new-org-name" data-i18n-placeholder="auth.placeholder_org_name"
                            placeholder="Organization Name" required>
                        <input type="text" id="new-org-region" data-i18n-placeholder="auth.placeholder_location"
                            placeholder="Location (optional)">
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" data-i18n="common.buttons.create">Create &
                                Continue</button>
                        </div>
                    </form>
                </div>

                <p class="help-text" style="margin-top: 20px;">
                    <span data-i18n="auth.no_invitation">Don't have an invitation code?</span>
                    <span data-i18n="auth.contact_admin">Contact your organization administrator to receive one.</span>
                </p>
            </div>
        </div>

        <!-- User Profile Setup -->
        <div id="profile-screen" class="screen hidden">
            <div class="form-container">
                <h2 data-i18n="auth.complete_signup">Complete Your Signup</h2>
                <p class="subtitle" data-i18n="auth.almost_there">Almost there! Just set your password to complete
                    registration</p>

                <form onsubmit="completeInvitationSignup(event)">
                    <!-- Hidden field for invitation token -->
                    <input type="hidden" id="invitation-token-hidden">

                    <!-- Pre-filled from invitation -->
                    <div class="form-group">
                        <label data-i18n="common.labels.full_name">Full Name</label>
                        <input type="text" id="user-name" data-i18n-placeholder="common.placeholder_full_name"
                            placeholder="Your Full Name" required>
                    </div>

                    <div class="form-group">
                        <label data-i18n="common.labels.email">Email Address</label>
                        <input type="email" id="user-email" data-i18n-placeholder="common.placeholder_email"
                            placeholder="Email Address" required>
                    </div>

                    <div class="form-group">
                        <label data-i18n="auth.create_password">Create Password</label>
                        <input type="password" id="user-password"
                            data-i18n-placeholder="auth.placeholder_create_password"
                            placeholder="Create Password (min 6 characters)" minlength="6" required autofocus>
                    </div>

                    <div class="form-group">
                        <label data-i18n="settings.timezone">Your Timezone</label>
                        <select id="user-timezone">
                            <option value="UTC">UTC</option>
                            <optgroup label="Americas">
                                <option value="America/New_York">Eastern Time (US)</option>
                                <option value="America/Chicago">Central Time (US)</option>
                                <option value="America/Denver">Mountain Time (US)</option>
                                <option value="America/Los_Angeles">Pacific Time (US)</option>
                                <option value="America/Anchorage">Alaska Time (US)</option>
                                <option value="Pacific/Honolulu">Hawaii Time (US)</option>
                                <option value="America/Toronto">Toronto</option>
                                <option value="America/Mexico_City">Mexico City</option>
                                <option value="America/Sao_Paulo">S√£o Paulo</option>
                                <option value="America/Buenos_Aires">Buenos Aires</option>
                            </optgroup>
                            <optgroup label="Europe">
                                <option value="Europe/London">London</option>
                                <option value="Europe/Paris">Paris / Berlin</option>
                                <option value="Europe/Madrid">Madrid</option>
                                <option value="Europe/Rome">Rome</option>
                                <option value="Europe/Athens">Athens</option>
                                <option value="Europe/Moscow">Moscow</option>
                            </optgroup>
                            <optgroup label="Asia">
                                <option value="Asia/Dubai">Dubai</option>
                                <option value="Asia/Kolkata">Mumbai / Delhi</option>
                                <option value="Asia/Shanghai">Shanghai / Beijing</option>
                                <option value="Asia/Hong_Kong">Hong Kong</option>
                                <option value="Asia/Singapore">Singapore</option>
                                <option value="Asia/Tokyo">Tokyo</option>
                                <option value="Asia/Seoul">Seoul</option>
                                <option value="Asia/Manila">Manila</option>
                            </optgroup>
                            <optgroup label="Africa">
                                <option value="Africa/Cairo">Cairo</option>
                                <option value="Africa/Johannesburg">Johannesburg</option>
                                <option value="Africa/Lagos">Lagos</option>
                                <option value="Africa/Nairobi">Nairobi</option>
                            </optgroup>
                            <optgroup label="Oceania">
                                <option value="Australia/Sydney">Sydney</option>
                                <option value="Australia/Melbourne">Melbourne</option>
                                <option value="Pacific/Auckland">Auckland</option>
                            </optgroup>
                        </select>
                        <p class="help-text" data-i18n="settings.timezone_auto_detected">Auto-detected from your browser
                        </p>
                    </div>

                    <div class="form-group">
                        <label data-i18n="auth.assigned_roles">Your Assigned Roles</label>
                        <div id="invitation-roles-display" class="role-badges">
                            <!-- Pre-assigned roles from invitation will be displayed here -->
                        </div>
                        <p class="help-text" data-i18n="auth.roles_assigned_by_admin">These roles were assigned by your
                            organization administrator</p>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large"
                            data-i18n="auth.complete_registration">Complete Registration ‚Üí</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Main App -->
        <div id="main-app" class="app-shell hidden">
            <!-- Sidebar Navigation -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="logo-icon">S</div>
                    <span class="app-title">SignUpFlow</span>
                </div>

                <nav class="nav-links">
                    <button class="nav-item nav-btn active" data-view="schedule" onclick="switchView('schedule')">
                        <svg class="nav-icon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        My Schedule
                    </button>
                    <button class="nav-item nav-btn" data-view="events" onclick="switchView('events')">
                        <svg class="nav-icon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                            <path d="M8 14h.01"></path>
                            <path d="M12 14h.01"></path>
                            <path d="M16 14h.01"></path>
                            <path d="M8 18h.01"></path>
                            <path d="M12 18h.01"></path>
                            <path d="M16 18h.01"></path>
                        </svg>
                        All Events
                    </button>
                    <button class="nav-item nav-btn" data-view="availability" onclick="switchView('availability')">
                        <svg class="nav-icon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                        Availability
                    </button>
                    <button class="nav-item nav-btn admin-only hidden" data-view="admin" onclick="switchView('admin')">
                        <svg class="nav-icon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                        Admin
                    </button>
                </nav>

                <div class="sidebar-footer">
                    <div class="user-avatar" id="user-avatar">U</div>
                    <div class="user-info-mini">
                        <span class="user-name" id="user-name-display">User</span>
                        <span class="user-role" id="user-role-display">Volunteer</span>
                    </div>
                    <button class="btn-icon" onclick="logout()" title="Logout" style="margin-left: auto;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </button>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">
                <!-- Top Bar -->
                <div class="top-bar">
                    <div class="page-title">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <button class="mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
                            <div>
                                <h1 id="page-title">Dashboard</h1>
                                <p class="page-subtitle" id="current-date">Welcome back</p>
                            </div>
                        </div>
                    </div>
                    <div class="global-actions" style="display: flex; gap: 0.75rem; align-items: center;">
                        <div class="action-btn">
                            <span style="font-size: 1.1rem;">üè¢</span>
                            <select id="org-dropdown" onchange="switchOrganization()"
                                style="border:none; outline:none; background:none;">
                                <!-- Organizations will be loaded here -->
                            </select>
                            <span id="org-name-display" class="org-badge" style="display:none;"></span>
                        </div>
                        <div class="action-btn">
                            <span style="font-size: 1.1rem;">üåê</span>
                            <select id="header-language" onchange="changeLanguage(this.value)">
                                <option value="en">EN</option>
                                <option value="es">ES</option>
                                <option value="zh-CN">‰∏≠Êñá</option>
                                <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                                <option value="tl">TL</option>
                                <option value="vi">VI</option>
                            </select>
                        </div>
                        <button class="action-btn btn-icon" onclick="showSettings()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                            Settings
                        </button>
                    </div>
                </div>

                <!-- Onboarding Dashboard (Legacy ID kept for compatibility) -->
                <section id="onboarding-dashboard" class="dashboard-section hidden" data-section="onboarding-dashboard">
                    <div class="dashboard-card">
                        <h2 data-i18n="onboarding.dashboard_title">üéØ Welcome to Your Onboarding Dashboard</h2>
                        <p class="help-text" data-i18n="onboarding.dashboard_subtitle">
                            Follow these quick actions to get your organization ready.
                        </p>

                        <div id="dashboard-sample-data-controls" class="dashboard-controls">
                            <h3 data-i18n="onboarding.sample_data_title">Sample Data</h3>
                            <p class="help-text" data-i18n="onboarding.sample_data_description">
                                Generate demo teams, volunteers, and events to explore SignUpFlow.
                            </p>
                            <div class="control-buttons">
                                <button class="btn btn-secondary" onclick="generateSampleData()"
                                    data-i18n="onboarding.generate_sample_data">
                                    üì¶ Generate Sample Data
                                </button>
                                <button class="btn btn-link" onclick="clearSampleData()"
                                    data-i18n="onboarding.clear_sample_data">
                                    üßπ Clear Sample Data
                                </button>
                            </div>
                        </div>

                        <div id="dashboard-video-grid" class="dashboard-grid video-grid">
                            <article class="video-card">
                                <h4 data-i18n="onboarding.video_getting_started_title">Getting Started</h4>
                                <p class="help-text" data-i18n="onboarding.video_getting_started_description">
                                    Learn the basics of creating organizations, teams, and events.
                                </p>
                                <button class="btn btn-link" onclick="playQuickStartVideo('getting_started')"
                                    data-i18n="onboarding.watch_video">
                                    ‚ñ∂Ô∏è Watch Video
                                </button>
                            </article>
                            <article class="video-card">
                                <h4 data-i18n="onboarding.video_events_title">Creating Events</h4>
                                <p class="help-text" data-i18n="onboarding.video_events_description">
                                    Step-by-step guide to scheduling recurring events with teams.
                                </p>
                                <button class="btn btn-link" onclick="playQuickStartVideo('creating_events')"
                                    data-i18n="onboarding.watch_video">
                                    ‚ñ∂Ô∏è Watch Video
                                </button>
                            </article>
                        </div>
                    </div>
                </section>

                <!-- My Schedule View -->
                <!-- My Schedule View -->
                <div id="schedule-view" class="view-content active">
                    <div class="dashboard-grid">
                        <!-- Stats Card -->
                        <div class="dashboard-card">
                            <div class="dashboard-card-header">
                                <div class="dashboard-card-title" data-i18n="schedule.overview">Overview</div>
                            </div>
                            <div class="stats-grid" style="margin-bottom: 0; grid-template-columns: 1fr 1fr;">
                                <div class="stat-item text-center">
                                    <div class="stat-value" id="upcoming-count">0</div>
                                    <div class="stat-label" data-i18n="schedule.upcoming">Upcoming</div>
                                </div>
                                <div class="stat-item text-center">
                                    <div class="stat-value" id="this-month-count">0</div>
                                    <div class="stat-label" data-i18n="schedule.this_month">This Month</div>
                                </div>
                            </div>
                        </div>

                        <!-- Actions Card -->
                        <div class="dashboard-card">
                            <div class="dashboard-card-header">
                                <div class="dashboard-card-title" data-i18n="schedule.quick_actions">Quick Actions</div>
                            </div>
                            <div class="action-list" style="display: flex; flex-direction: column; gap: 0.75rem;">
                                <button class="btn btn-secondary" onclick="showCalendarSubscription()"
                                    style="width: 100%; justify-content: flex-start;">
                                    <span class="btn-icon">üîó</span> <span data-i18n="schedule.subscribe">Subscribe to
                                        Calendar</span>
                                </button>
                                <button class="btn btn-primary" onclick="exportMyCalendar()"
                                    style="width: 100%; justify-content: flex-start;">
                                    <span class="btn-icon">üì•</span> <span data-i18n="schedule.download_ics">Download
                                        ICS File</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="schedule-list" class="schedule-list">
                        <div class="loading" data-i18n="messages.loading.schedule">Loading schedule...</div>
                    </div>
                </div>

                <!-- Events View -->
                <div id="events-view" class="view-content">


                    <div class="events-filter">
                        <select id="events-month-filter" onchange="loadAllEvents()">
                            <option value="current" data-i18n="schedule.this_month">This Month</option>
                            <option value="next" data-i18n="schedule.next_month">Next Month</option>
                            <option value="all" data-i18n="schedule.all_upcoming">All Upcoming</option>
                        </select>
                    </div>

                    <div id="all-events-list" class="events-list">
                        <div class="loading"><span data-i18n="events.loading_events">Loading events...</span>
                        </div>
                    </div>
                </div>

                <!-- Availability View -->
                <div id="availability-view" class="view-content">


                    <div class="availability-form">
                        <h3 data-i18n="schedule.add_time_off">Add Time Off</h3>
                        <form onsubmit="addTimeOff(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label data-i18n="common.labels.from_date">From Date</label>
                                    <input type="date" id="timeoff-start" required>
                                </div>
                                <div class="form-group">
                                    <label data-i18n="common.labels.to_date">To Date</label>
                                    <input type="date" id="timeoff-end" required>
                                </div>
                            </div>
                            <input type="text" id="timeoff-reason" data-i18n-placeholder="schedule.placeholder_reason"
                                placeholder="Reason (optional)">
                            <button type="submit" class="btn btn-primary" data-i18n="schedule.add_time_off">Add
                                Time
                                Off</button>
                        </form>

                        <div id="availability-calendar" class="calendar-container">
                            <!-- Calendar will be rendered here -->
                        </div>

                        <div id="timeoff-list" class="timeoff-list">
                            <h3 data-i18n="schedule.blocked_dates">Your Blocked Dates</h3>
                            <div class="loading" data-i18n="common.loading">Loading...</div>
                        </div>
                    </div>
                </div>

                <!-- Edit Time Off Modal -->
                <div id="edit-timeoff-modal" class="modal hidden">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 data-i18n="schedule.edit_timeoff">Edit Blocked Date</h3>
                            <button class="btn-close" onclick="closeEditTimeOffModal()">√ó</button>
                        </div>
                        <div class="modal-body">
                            <form id="edit-timeoff-form" onsubmit="saveEditedTimeOff(event)">
                                <input type="hidden" id="edit-timeoff-id">
                                <div class="form-group">
                                    <label data-i18n="common.labels.from_date">From Date</label>
                                    <input type="date" id="edit-timeoff-start" required>
                                </div>
                                <div class="form-group">
                                    <label data-i18n="common.labels.to_date">To Date</label>
                                    <input type="date" id="edit-timeoff-end" required>
                                </div>
                                <div class="form-group">
                                    <label data-i18n="schedule.reason_optional">Reason (optional)</label>
                                    <input type="text" id="edit-timeoff-reason"
                                        data-i18n-placeholder="schedule.placeholder_reason_example"
                                        placeholder="e.g., Vacation, Family event">
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" onclick="closeEditTimeOffModal()"
                                        data-i18n="common.buttons.cancel">Cancel</button>
                                    <button type="submit" class="btn btn-primary" data-i18n="common.buttons.save">Save
                                        Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Admin Dashboard View -->
                <div id="admin-view" class="view-content">


                    <!-- Admin Tabs Navigation -->
                    <div class="admin-tabs">
                        <button class="admin-tab-btn active" data-tab="events" onclick="switchAdminTab('events')"
                            data-i18n="events.events">
                            Events
                        </button>
                        <button class="admin-tab-btn" data-tab="roles" onclick="switchAdminTab('roles')"
                            data-i18n="admin.roles">
                            Roles
                        </button>
                        <button class="admin-tab-btn" data-tab="solver" onclick="switchAdminTab('solver')"
                            data-i18n="solver.tab_title">
                            Solver
                        </button>
                        <button class="admin-tab-btn" data-tab="people" onclick="switchAdminTab('people')"
                            data-i18n="admin.tabs.people">
                            People
                        </button>
                        <button class="admin-tab-btn" data-tab="invitations" onclick="switchAdminTab('invitations')"
                            data-i18n="admin.tabs.invitations">
                            Invitations
                        </button>
                        <button class="admin-tab-btn" data-tab="reports" onclick="switchAdminTab('reports')"
                            data-i18n="admin.tabs.reports">
                            Reports
                        </button>
                        <button class="admin-tab-btn" data-tab="analytics" onclick="switchAdminTab('analytics')"
                            data-i18n="admin.tabs.analytics">
                            Analytics
                        </button>
                        <button class="admin-tab-btn" data-tab="constraints" onclick="switchAdminTab('constraints')"
                            data-i18n="admin.tabs.constraints">
                            Constraints
                        </button>
                        <button class="admin-tab-btn" data-tab="teams" onclick="switchAdminTab('teams')"
                            data-i18n="admin.tabs.teams">
                            Teams
                        </button>
                    </div>

                    <div class="admin-dashboard">
                        <!-- Events Tab -->
                        <div id="admin-tab-events" class="admin-tab-content active">
                            <div class="admin-section">
                                <div class="admin-section-header">
                                    <h3><span data-i18n="admin.event_management">Event Management</span></h3>
                                    <div class="admin-controls">
                                        <button class="btn btn-primary" onclick="showCreateEventForm()"><span
                                                data-i18n="admin.create_event_button">+ Create
                                                Event</span></button>
                                        <button class="btn btn-secondary" onclick="loadAdminEvents()"><span
                                                data-i18n="common.refresh">üîÑ Refresh</span></button>
                                    </div>
                                </div>
                                <div class="admin-stats-inline">
                                    <div class="stat-card-inline">
                                        <span class="stat-label-inline"><span data-i18n="admin.total_events">Total
                                                Events:</span></span>
                                        <span class="stat-value-inline" id="admin-events-count">0</span>
                                    </div>
                                </div>
                                <div class="admin-filter">
                                    <label>Organization:</label>
                                    <select id="events-org-filter" onchange="loadAdminEvents()">
                                        <option value="">Select Organization</option>
                                    </select>
                                </div>
                                <div id="admin-events-list" class="admin-list">
                                    <div class="loading"><span data-i18n="events.loading_events">Loading
                                            events...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Roles Tab -->
                        <div id="admin-tab-roles" class="admin-tab-content">
                            <div class="admin-section">
                                <div class="admin-section-header">
                                    <h3><span data-i18n="admin.role_management">Role Management</span></h3>
                                    <div class="admin-controls">
                                        <button class="btn btn-primary" onclick="showAddRoleForm()">+ Add
                                            Role</button>
                                    </div>
                                </div>
                                <p class="help-text"><span data-i18n="admin.define_custom_roles">Define custom
                                        roles for
                                        your organization</span></p>
                                <div id="admin-roles-list" class="roles-list">
                                    <div class="loading"><span data-i18n="admin.loading_roles">Loading
                                            roles...</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Solver Tab -->
                        <div id="admin-tab-solver" class="admin-tab-content">
                            <div class="admin-section">
                                <div class="admin-section-header">
                                    <h3 data-i18n="solver.schedule_generation">AI Schedule Solver</h3>
                                </div>

                                <!-- Solver Configuration Panel -->
                                <div class="solver-panel" id="solver-panel">
                                    <form onsubmit="solveSchedule(event)" class="solver-form">
                                        <input type="hidden" id="solve-org-id">

                                        <div class="form-row">
                                            <div class="form-group">
                                                <label data-i18n="common.labels.from_date">From Date</label>
                                                <input type="date" id="solve-from-date" name="from_date" required>
                                            </div>
                                            <div class="form-group">
                                                <label data-i18n="common.labels.to_date">To Date</label>
                                                <input type="date" id="solve-to-date" name="to_date" required>
                                            </div>
                                            <div class="form-group">
                                                <label data-i18n="solver.mode">Optimization Mode</label>
                                                <select id="solve-mode" name="mode">
                                                    <option value="balanced">Balanced (Recommended)</option>
                                                    <option value="fairness">Maximize Fairness</option>
                                                    <option value="coverage">Maximize Coverage</option>
                                                    <option value="relaxed">Relaxed (Allow Soft Violations)</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="solver-controls">
                                            <button type="submit" class="btn btn-primary btn-large"
                                                id="run-solver-button">
                                                <span class="btn-icon">‚ú®</span> <span data-i18n="solver.run">Run
                                                    Solver</span>
                                            </button>
                                        </div>
                                    </form>
                                </div>

                                <!-- Solver Status & Metrics -->
                                <div id="solver-status" class="solver-status hidden"></div>
                                <div id="solution-metrics" class="solution-metrics"></div>

                                <!-- Solver Results (Hidden by default) -->
                                <div id="solve-results" class="solver-results hidden">
                                    <h4 data-i18n="solver.results_title">Generated Schedule</h4>

                                    <!-- Results Table -->
                                    <div class="table-responsive">
                                        <table id="solver-results-table" class="data-table">
                                            <thead>
                                                <tr>
                                                    <th data-i18n="events.event">Event</th>
                                                    <th data-i18n="common.labels.date">Date</th>
                                                    <th data-i18n="common.labels.time">Time</th>
                                                    <th data-i18n="common.labels.volunteer">Volunteer</th>
                                                    <th data-i18n="admin.role">Role</th>
                                                    <th data-i18n="common.labels.actions">Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody id="solver-results-body">
                                                <!-- Results injected via JS -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Calendar View -->
                                <div class="admin-calendar-section">
                                    <h4 data-i18n="solver.schedule_calendar">Schedule Calendar</h4>
                                    <div id="admin-calendar-view" class="admin-calendar">
                                        <p class="help-text" data-i18n="solver.generate_first">Generate a schedule to
                                            see it on the calendar</p>
                                    </div>
                                </div>
                            </div>
                        </div> <!-- Generated Schedules List -->
                        <div class="admin-section">
                            <div class="admin-section-header">
                                <h3 data-i18n="solver.generated_schedules">Generated Schedules</h3>
                            </div>
                            <div class="admin-stats-inline">
                                <div class="stat-card-inline">
                                    <span class="stat-label-inline" data-i18n="solver.total_schedules">Total
                                        Schedules:</span>
                                    <span class="stat-value-inline" id="admin-solutions-count">0</span>
                                </div>
                            </div>
                            <div id="admin-solutions-list" class="admin-list">
                                <div class="loading" data-i18n="solver.loading_schedules">Loading
                                    schedules...</div>
                            </div>
                        </div>
                    </div>

                    <!-- People Tab -->
                    <div id="admin-tab-people" class="admin-tab-content">
                        <div class="admin-section">
                            <div class="admin-section-header">
                                <h3 data-i18n="admin.people.title">Manage People</h3>
                                <div class="admin-controls">
                                    <button class="btn btn-primary" onclick="showInviteUserModal()">+ Invite
                                        User</button>
                                </div>
                            </div>
                            <div class="admin-stats-inline">
                                <div class="stat-card-inline">
                                    <span class="stat-label-inline" data-i18n="admin.total_people">Total
                                        People:</span>
                                    <span class="stat-value-inline" id="admin-people-count">0</span>
                                </div>
                            </div>
                            <div class="admin-filter">
                                <label>Organization:</label>
                                <select id="people-org-filter" onchange="loadPeople()">
                                    <option value="">Select Organization</option>
                                </select>
                            </div>

                            <!-- People List -->
                            <h4 data-i18n="admin.team_members">Team Members</h4>
                            <div id="admin-people-list" class="admin-list">
                                <div class="loading" data-i18n="admin.loading_people">Loading people...
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Invitations Tab -->
                    <div id="admin-tab-invitations" class="admin-tab-content">
                        <div class="admin-section">
                            <div class="admin-section-header">
                                <h3 data-i18n="admin.invitations.title">User Invitations</h3>
                                <div class="admin-controls">
                                    <button class="btn btn-primary" onclick="showInviteUserModal()">+ Send
                                        Invitation</button>
                                </div>
                            </div>
                            <div class="invitations-dashboard">
                                <h4 data-i18n="admin.invitation_status">Invitation Status</h4>
                                <div id="invitations-summary" class="invitations-summary">
                                    <div class="invitation-stat">
                                        <span class="invitation-count" id="pending-invitations">0</span>
                                        <span class="invitation-label" data-i18n="admin.pending">Pending</span>
                                    </div>
                                    <div class="invitation-stat">
                                        <span class="invitation-count" id="accepted-invitations">0</span>
                                        <span class="invitation-label" data-i18n="admin.accepted">Accepted</span>
                                    </div>
                                    <div class="invitation-stat">
                                        <span class="invitation-count" id="expired-invitations">0</span>
                                        <span class="invitation-label" data-i18n="admin.expired">Expired</span>
                                    </div>
                                </div>
                                <div id="invitations-list" class="invitations-list">
                                    <div class="loading" data-i18n="admin.loading_invitations">Loading
                                        invitations...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reports Tab -->
                    <div id="admin-tab-reports" class="admin-tab-content">
                        <div class="admin-section">
                            <div class="admin-section-header">
                                <h3 data-i18n="admin.reports_export">Reports & Export</h3>
                            </div>
                            <p class="help-text" data-i18n="admin.export_schedules_desc">Export schedules and generate reports</p>

                            <div class="reports-grid">
                                <div class="report-card">
                                    <h4 data-i18n="admin.pdf_schedule_export">PDF Schedule Export</h4>
                                    <p data-i18n="admin.download_printable">Download a printable schedule
                                        for
                                        distribution</p>
                                    <button class="btn btn-primary" onclick="exportLatestSchedulePDF()">üì•
                                        Export
                                        PDF</button>
                                </div>
                                <div class="report-card">
                                    <h4 data-i18n="admin.calendar_export_ics">Calendar Export (ICS)</h4>
                                    <p data-i18n="admin.export_all_events">Export all organization events to
                                        calendar
                                    </p>
                                    <button class="btn btn-primary" onclick="exportOrgCalendar()">üìÖ Export
                                        ICS</button>
                                </div>
                                <div class="report-card">
                                    <h4 data-i18n="admin.schedule_statistics">Schedule Statistics</h4>
                                    <p data-i18n="admin.view_distribution">View assignment distribution and
                                        metrics
                                    </p>
                                    <button class="btn btn-secondary" onclick="showScheduleStats()">üìä View
                                        Stats</button>
                                </div>
                            </div>

                            <!-- Statistics Display -->
                            <div id="schedule-stats-display" class="stats-display hidden">
                                <h4 data-i18n="admin.schedule_statistics">Schedule Statistics</h4>
                                <div id="stats-content" class="stats-content">
                                    <div class="loading" data-i18n="admin.loading_statistics">Loading
                                        statistics...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Analytics Tab -->
                    <div id="admin-tab-analytics" class="admin-tab-content">
                        <div class="admin-section">
                            <div class="admin-section-header">
                                <h3 data-i18n="admin.analytics_dashboard">Analytics Dashboard</h3>
                                <div class="admin-controls">
                                    <div class="date-range-filter">
                                        <select id="date-range-filter" class="form-control" onchange="loadAnalytics()">
                                            <option value="7">Last 7 days</option>
                                            <option value="30" selected>Last 30 days</option>
                                            <option value="90">Last 90 days</option>
                                            <option value="custom">Custom Range</option>
                                        </select>
                                        <div id="custom-date-inputs" class="hidden">
                                            <input type="date" id="analytics-date-from" class="form-control"
                                                placeholder="From">
                                            <span class="separator">-</span>
                                            <input type="date" id="analytics-date-to" class="form-control"
                                                placeholder="To">
                                            <button class="btn btn-secondary btn-sm"
                                                onclick="loadAnalytics()">Apply</button>
                                        </div>
                                    </div>
                                    <div class="export-group">
                                        <button id="export-analytics" class="btn btn-secondary"
                                            onclick="toggleExportMenu()">
                                            <span>Export</span>
                                        </button>
                                        <div id="export-menu" class="hidden">
                                            <button onclick="exportReport('csv')">CSV</button>
                                            <button onclick="exportReport('pdf')">PDF</button>
                                        </div>
                                    </div>
                                    <button class="btn btn-secondary" onclick="loadAnalytics()">üîÑ Refresh</button>
                                </div>
                            </div>

                            <!-- Analytics Content Container -->
                            <div id="analytics-dashboard" class="analytics-container">
                                <div class="loading">Loading analytics data...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Constraints Tab -->
                    <div id="admin-tab-constraints" class="admin-tab-content">
                        <div class="admin-section">
                            <div class="admin-section-header">
                                <h3 data-i18n="admin.constraints_management">Constraints Management</h3>
                                <div class="admin-controls">
                                    <button class="btn btn-primary" onclick="showAddConstraintModal()">+ Add
                                        Constraint</button>
                                    <button class="btn btn-secondary" onclick="loadConstraints()">üîÑ Refresh</button>
                                </div>
                            </div>
                            <div id="constraints-list" class="admin-list">
                                <div class="loading">Loading constraints...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Teams Tab -->
                    <div id="admin-tab-teams" class="admin-tab-content">
                        <div class="admin-section">
                            <div class="admin-section-header">
                                <h3><span data-i18n="admin.team_management">Team Management</span></h3>
                                <div class="admin-controls">
                                    <button class="btn btn-primary" onclick="showCreateTeamForm()">+ Create
                                        Team</button>
                                    <button class="btn btn-secondary" onclick="loadAdminTeams()">üîÑ
                                        Refresh</button>
                                </div>
                            </div>
                            <div class="admin-filter">
                                <label>Organization:</label>
                                <select id="teams-org-filter" onchange="loadAdminTeams()">
                                    <option value="">Select Organization</option>
                                </select>
                            </div>
                            <div id="teams-list" class="admin-list">
                                <div class="loading">Select an organization to view teams</div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        </main>
    </div>

    <!-- Create Event Modal -->
    <div id="create-event-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="events.create_event">Create Event</h3>
                <button class="btn-close" onclick="closeCreateEventForm()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="create-event-form" onsubmit="window.createEvent(event); return false;">
                    <div class="form-group">
                        <label data-i18n="events.event_type">Event Type</label>
                        <select id="event-type" required>
                            <option value="" data-i18n="events.select_type">Select type...</option>
                            <option value="Sunday Service" data-i18n="events.type_sunday_service">Sunday Service
                            </option>
                            <option value="Worship Service" data-i18n="events.type_worship_service">Worship Service
                            </option>
                            <option value="Bible Study" data-i18n="events.type_bible_study">Bible Study</option>
                            <option value="Prayer Meeting" data-i18n="events.type_prayer_meeting">Prayer Meeting
                            </option>
                            <option value="Youth Group" data-i18n="events.type_youth_group">Youth Group</option>
                            <option value="Board Meeting" data-i18n="events.type_board_meeting">Board Meeting
                            </option>
                            <option value="Special Event" data-i18n="events.type_special_event">Special Event
                            </option>
                            <option value="Other" data-i18n="events.type_other_specify">Other (specify in title)
                            </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="events.title_optional">Title (optional, override type name)</label>
                        <input type="text" id="event-title" data-i18n-placeholder="events.placeholder_title"
                            placeholder="e.g., Christmas Service">
                    </div>
                    <div class="form-group">
                        <label data-i18n="events.date_time">Date & Time</label>
                        <input type="datetime-local" id="event-start" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="events.duration">Duration (hours)</label>
                        <input type="number" id="event-duration" value="2" min="0.5" step="0.5" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="events.occurs">Occurs</label>
                        <select id="event-occurs" onchange="toggleRecurrenceOptions()">
                            <option value="once" data-i18n="events.once">Once</option>
                            <option value="daily" data-i18n="events.daily">Daily</option>
                            <option value="weekly" data-i18n="events.weekly">Weekly</option>
                            <option value="monthly" data-i18n="events.monthly">Monthly</option>
                        </select>
                    </div>
                    <div id="recurrence-options" class="form-group" style="display: none;">
                        <label data-i18n="events.end_date">End Date</label>
                        <input type="date" id="event-end-date">
                        <small style="color: var(--text-light); display: block; margin-top: 5px;"
                            data-i18n="events.end_date_hint">Leave blank for 1 year from start</small>
                    </div>
                    <div class="form-group">
                        <label data-i18n="events.location">Location</label>
                        <input type="text" id="event-location" data-i18n-placeholder="events.placeholder_location"
                            placeholder="Main Sanctuary, Fellowship Hall">
                    </div>
                    <div class="form-group">
                        <label data-i18n="events.roles_needed">Roles Needed - Select all that apply</label>
                        <div class="role-selector" id="event-role-selector">
                            <!-- Roles will be loaded dynamically from org config -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeCreateEventForm()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="events.create_event">Create
                            Event</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="settings.title">Settings</h3>
                <button class="btn-close" onclick="closeSettings()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <label data-i18n="settings.name">Your Name</label>
                    <input type="text" id="settings-name" readonly>
                </div>
                <div class="setting-item">
                    <label data-i18n="settings.email">Email</label>
                    <input type="email" id="settings-email" readonly>
                </div>
                <div class="setting-item">
                    <label data-i18n="settings.organization">Organization</label>
                    <input type="text" id="settings-org" readonly>
                </div>
                <div class="setting-item">
                    <label data-i18n="settings.timezone">Timezone</label>
                    <select id="settings-timezone">
                        <option value="UTC">UTC</option>
                        <option value="America/New_York" data-i18n="settings.tz_eastern">Eastern Time</option>
                        <option value="America/Chicago" data-i18n="settings.tz_central">Central Time</option>
                        <option value="America/Denver" data-i18n="settings.tz_mountain">Mountain Time</option>
                        <option value="America/Los_Angeles" data-i18n="settings.tz_pacific">Pacific Time</option>
                        <option value="America/Anchorage" data-i18n="settings.tz_alaska">Alaska Time</option>
                        <option value="Pacific/Honolulu" data-i18n="settings.tz_hawaii">Hawaii Time</option>
                        <option value="Europe/London" data-i18n="settings.tz_london">London</option>
                        <option value="Europe/Paris" data-i18n="settings.tz_paris">Paris</option>
                        <option value="Asia/Tokyo" data-i18n="settings.tz_tokyo">Tokyo</option>
                        <option value="Asia/Shanghai" data-i18n="settings.tz_shanghai">Shanghai</option>
                        <option value="Asia/Dubai" data-i18n="settings.tz_dubai">Dubai</option>
                        <option value="Australia/Sydney" data-i18n="settings.tz_sydney">Sydney</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label data-i18n="settings.language">Language</label>
                    <select id="settings-language" onchange="changeLanguage(this.value)">
                        <option value="en" data-i18n="settings.lang_english">English</option>
                        <option value="es" data-i18n="settings.lang_spanish">Espa√±ol</option>
                        <option value="pt" data-i18n="settings.lang_portuguese">Portugu√™s</option>
                        <option value="fr" data-i18n="settings.lang_french">Fran√ßais</option>
                        <option value="zh-CN">‰∏≠Êñá (ÁÆÄ‰Ωì)</option>
                        <option value="zh-TW">‰∏≠Êñá (ÁπÅÈ´î)</option>
                    </select>
                    <p class="help-text">
                        <span data-i18n="settings.language_change_note">Changes take effect immediately</span>
                    </p>
                </div>
                <div class="setting-item">
                    <label data-i18n="settings.permission_level">Permission Level</label>
                    <div id="settings-permission-display"
                        style="padding: 10px; background: var(--surface); border-radius: 4px; color: var(--text-light);">
                        <!-- Permissions are set by administrators -->
                    </div>
                    <p class="help-text">
                        <span data-i18n="settings.permission_note">Your permission level is set by an administrator.
                            Event-specific roles are selected when you join individual events.</span>
                    </p>
                </div>

                <!-- SMS Preferences Section (dynamically populated) -->
                <div id="sms-preferences-container"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="logout()" data-i18n="settings.logout">Sign Out</button>
                <button class="btn btn-primary" onclick="saveSettings()" data-i18n="settings.save_changes">Save
                    Changes</button>
                <button class="btn btn-secondary" onclick="closeSettings()"
                    data-i18n="common.buttons.cancel">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Role Modal -->
    <div id="add-role-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.add_custom_role">Add Custom Role</h3>
                <button class="btn-close" onclick="closeAddRoleForm()">√ó</button>
            </div>
            <div class="modal-body">
                <form onsubmit="addCustomRole(event)">
                    <div class="form-group">
                        <label data-i18n="admin.role_name">Role Name</label>
                        <input type="text" id="role-name" data-i18n-placeholder="admin.placeholder_role_name"
                            placeholder="e.g., Usher, Greeter" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="admin.description_optional">Description (optional)</label>
                        <textarea id="role-description" rows="3" data-i18n-placeholder="admin.placeholder_role_desc"
                            placeholder="Brief description of this role"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeAddRoleForm()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="admin.add_role">Add Role</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Person Roles Modal -->
    <div id="edit-person-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.edit_roles_for">Edit Roles for <span id="edit-person-name"></span></h3>
                <button class="btn-close" onclick="closeEditPersonModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="edit-person-form" onsubmit="updatePersonRoles(event)">
                    <input type="hidden" id="edit-person-id">
                    <div class="form-group">
                        <label data-i18n="admin.roles">Roles</label>
                        <div id="edit-person-roles-checkboxes" class="role-selector">
                            <!-- Role checkboxes will be dynamically populated -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeEditPersonModal()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="common.buttons.save">Save
                            Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Role Modal -->
    <div id="edit-role-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.edit_role">Edit Role</h3>
                <button class="btn-close" onclick="closeEditRoleModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="edit-role-form" onsubmit="saveEditRole(event)">
                    <input type="hidden" id="edit-role-old-name">
                    <div class="form-group">
                        <label for="edit-role-name" data-i18n="admin.role_name">Role Name</label>
                        <input type="text" id="edit-role-name" class="form-control" required>
                        <small class="form-help" data-i18n="admin.role_name_hint">Use lowercase with underscores
                            (e.g., worship_leader)</small>
                    </div>
                    <div class="form-group">
                        <label for="edit-role-description" data-i18n="admin.description">Description</label>
                        <textarea id="edit-role-description" class="form-control" rows="3"
                            data-i18n-placeholder="admin.placeholder_optional_desc"
                            placeholder="Optional description"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeEditRoleModal()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="common.buttons.save">Save
                            Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Manage Role People Modal -->
    <div id="manage-role-people-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.manage_people_for">Manage People for <span id="manage-role-name"></span></h3>
                <button class="btn-close" onclick="closeManageRolePeopleModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="manage-role-people-form" onsubmit="saveRolePeople(event)">
                    <input type="hidden" id="manage-role-id">
                    <div class="form-group">
                        <label data-i18n="admin.select_people_with_role">Select people who should have this
                            role:</label>
                        <div id="manage-role-people-checkboxes" class="role-selector">
                            <!-- People checkboxes will be dynamically populated -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeManageRolePeopleModal()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="common.buttons.save">Save
                            Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Assignment Modal -->
    <div id="assignment-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="events.assign_people">Assign People to Event</h3>
                <button class="btn-close" onclick="closeAssignmentModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="assignment-people-list"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAssignmentModal()"
                    data-i18n="common.buttons.done">Done</button>
            </div>
        </div>
    </div>

    <!-- Invite User Modal -->
    <div id="invite-user-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.invite_user">Invite User</h3>
                <button class="btn-close" onclick="closeInviteUserModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="invite-user-form" onsubmit="sendInvitation(event)">
                    <div class="form-group">
                        <label data-i18n="common.labels.email">Email Address</label>
                        <input type="email" id="invite-email" data-i18n-placeholder="admin.placeholder_email"
                            placeholder="user@example.com" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="common.labels.full_name">Full Name</label>
                        <input type="text" id="invite-name" data-i18n-placeholder="admin.placeholder_name"
                            placeholder="John Doe" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="admin.assign_roles">Assign Roles</label>
                        <div class="role-selector" id="invite-role-selector">
                            <label class="role-option">
                                <input type="checkbox" value="volunteer"> <span
                                    data-i18n="common.volunteer">Volunteer</span>
                            </label>
                            <label class="role-option">
                                <input type="checkbox" value="admin"> <span data-i18n="common.admin">Admin</span>
                            </label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeInviteUserModal()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="admin.send_invitation">Send
                            Invitation</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Calendar Subscription Modal -->
    <div id="calendar-subscription-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="schedule.subscribe_to_calendar">Subscribe to Calendar</h3>
                <button class="close-btn" onclick="closeCalendarSubscriptionModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p class="help-text" data-i18n="schedule.subscription_help">
                    Subscribe to your schedule in Google Calendar, Apple Calendar, Outlook, or any other calendar
                    app.
                    Your calendar will automatically update when your schedule changes.
                </p>

                <div class="form-group">
                    <label data-i18n="schedule.subscription_url_webcal">Subscription URL (webcal://)</label>
                    <div class="input-group">
                        <input type="text" id="webcal-url" readonly class="subscription-url">
                        <button class="btn btn-secondary" onclick="copyToClipboard('webcal-url')"
                            data-i18n="common.buttons.copy">Copy</button>
                    </div>
                    <small class="help-text" data-i18n="schedule.webcal_hint">Use this URL in most calendar
                        apps</small>
                </div>

                <div class="form-group">
                    <label data-i18n="schedule.alternative_url_https">Alternative URL (https://)</label>
                    <div class="input-group">
                        <input type="text" id="https-url" readonly class="subscription-url">
                        <button class="btn btn-secondary" onclick="copyToClipboard('https-url')"
                            data-i18n="common.buttons.copy">Copy</button>
                    </div>
                    <small class="help-text" data-i18n="schedule.https_hint">Use this if webcal:// doesn't
                        work</small>
                </div>

                <div class="calendar-instructions">
                    <h4 data-i18n="schedule.how_to_subscribe">How to subscribe:</h4>
                    <ul>
                        <li><strong data-i18n="schedule.google_calendar">Google Calendar:</strong> Settings ‚Üí Add
                            calendar ‚Üí From URL</li>
                        <li><strong data-i18n="schedule.apple_calendar">Apple Calendar:</strong> File ‚Üí New Calendar
                            Subscription</li>
                        <li><strong data-i18n="schedule.outlook">Outlook:</strong> Calendar ‚Üí Add calendar ‚Üí
                            Subscribe from web</li>
                    </ul>
                </div>

                <div class="alert alert-warning">
                    <strong data-i18n="schedule.security_note_title">Security Note:</strong> <span
                        data-i18n="schedule.security_note_text">Keep this URL private. Anyone with this URL can view
                        your schedule.</span>
                    <button class="btn btn-link" onclick="resetCalendarToken()" data-i18n="schedule.reset_url">Reset
                        URL</button> <span data-i18n="schedule.if_compromised">if compromised.</span>
                </div>

                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="closeCalendarSubscriptionModal()"
                        data-i18n="common.buttons.close">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Select Role for Event Modal -->
    <div id="select-role-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="events.select_your_role">Select Your Role</h3>
                <button class="btn-close" onclick="closeSelectRoleModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p class="help-text" data-i18n="events.role_question">What role will you fulfill for this event?</p>
                <form id="select-role-form" onsubmit="submitEventRole(event)">
                    <input type="hidden" id="role-event-id">
                    <div class="form-group">
                        <label for="event-role-select" data-i18n="admin.role">Role</label>
                        <select id="event-role-select" class="form-control" required>
                            <option value="">-- Select a role --</option>
                            <option value="usher" data-i18n="events.role_usher">Usher</option>
                            <option value="greeter" data-i18n="events.role_greeter">Greeter</option>
                            <option value="sound_tech"><span data-i18n="events.role_sound_tech">Sound Tech</span>
                            </option>
                            <option value="video_tech"><span data-i18n="events.role_video_tech">Video Tech</span>
                            </option>
                            <option value="worship_leader"><span data-i18n="events.role_worship_leader">Worship
                                    Leader</span></option>
                            <option value="speaker" data-i18n="events.role_speaker">Speaker</option>
                            <option value="nursery" data-i18n="events.role_nursery">Nursery</option>
                            <option value="parking" data-i18n="events.role_parking">Parking</option>
                            <option value="security" data-i18n="events.role_security">Security</option>
                            <option value="other" data-i18n="events.role_other">Other</option>
                        </select>
                    </div>
                    <div class="form-group" id="custom-role-group" style="display: none;">
                        <label for="custom-role-input" data-i18n="events.custom_role_name">Custom Role Name</label>
                        <input type="text" id="custom-role-input" class="form-control"
                            data-i18n-placeholder="events.placeholder_custom_role" placeholder="Enter custom role">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeSelectRoleModal()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="events.join_event">Join
                            Event</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Create Team Modal -->
    <div id="create-team-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.create_team">Create Team</h3>
                <button class="btn-close" onclick="hideCreateTeamForm()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="create-team-form" onsubmit="createTeam(event)">
                    <div class="form-group">
                        <label data-i18n="admin.team_id">Team ID</label>
                        <input type="text" id="team-id" data-i18n-placeholder="admin.placeholder_team_id"
                            placeholder="e.g., worship_team" required pattern="[a-z0-9_]+"
                            title="Lowercase letters, numbers, and underscores only">
                    </div>
                    <div class="form-group">
                        <label data-i18n="admin.organization">Organization</label>
                        <select id="team-org-id" required>
                            <!-- Populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="admin.team_name">Team Name</label>
                        <input type="text" id="team-name" data-i18n-placeholder="admin.placeholder_team_name"
                            placeholder="e.g., Worship Team" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="admin.description_optional">Description (optional)</label>
                        <textarea id="team-description" rows="3" data-i18n-placeholder="admin.placeholder_team_desc"
                            placeholder="Brief description of this team"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="hideCreateTeamForm()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="admin.create_team">Create
                            Team</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Team Modal -->
    <div id="edit-team-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.edit_team">Edit Team</h3>
                <button class="btn-close" onclick="hideEditTeamModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="edit-team-form" onsubmit="updateTeam(event)">
                    <input type="hidden" id="edit-team-id-hidden">
                    <div class="form-group">
                        <label data-i18n="admin.team_name">Team Name</label>
                        <input type="text" id="edit-team-name" required>
                    </div>
                    <div class="form-group">
                        <label data-i18n="admin.description_optional">Description (optional)</label>
                        <textarea id="edit-team-description" rows="3"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="hideEditTeamModal()"
                            data-i18n="common.buttons.cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary" data-i18n="common.buttons.save">Save
                            Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Manage Team Members Modal -->
    <div id="manage-team-members-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.manage_team_members">Manage Team Members</h3>
                <button class="btn-close" onclick="hideManageTeamMembersModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="team-members-header">
                    <h4 id="manage-team-name-display">Team Name</h4>
                    <div class="add-member-control">
                        <select id="add-team-member-select">
                            <option value="">Select person to add...</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="addTeamMember()">Add</button>
                    </div>
                </div>
                <div id="team-members-list" class="team-members-list">
                    <div class="loading">Loading members...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideManageTeamMembersModal()"
                    data-i18n="common.buttons.close">Close</button>
            </div>
        </div>
    </div>

    <!-- Delete Team Modal -->
    <div id="delete-team-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="admin.delete_team">Delete Team</h3>
                <button class="btn-close" onclick="hideDeleteTeamModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p data-i18n="admin.delete_team_confirm">Are you sure you want to delete this team? This action
                    cannot be undone.</p>
                <p class="help-text" id="delete-team-name-display"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideDeleteTeamModal()"
                    data-i18n="common.buttons.cancel">Cancel</button>
                <button class="btn btn-danger" onclick="confirmDeleteTeam()"
                    data-i18n="common.buttons.delete">Delete</button>
            </div>
        </div>
    </div>
    </div>

    <!-- Modal for Add/Edit Constraint -->
    <div id="constraint-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="constraint-modal-title">Add/Edit Constraint</h3>
                <button class="btn-close" onclick="closeConstraintModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="constraint-form" onsubmit="saveConstraint(event)">
                    <div class="form-group">
                        <label for="constraint-key">Constraint Key</label>
                        <input type="text" id="constraint-key" required placeholder="e.g., max_shifts_per_week">
                    </div>

                    <div class="form-group">
                        <label for="constraint-type">Type</label>
                        <select id="constraint-type" required>
                            <option value="hard">Hard (Mandatory)</option>
                            <option value="soft">Soft (Preferred)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="constraint-weight">Weight (0-100, for Soft)</label>
                        <input type="number" id="constraint-weight" value="10" min="0" max="100">
                    </div>

                    <div class="form-group">
                        <label for="constraint-predicate">Predicate/Rule</label>
                        <textarea id="constraint-predicate" required rows="3"
                            placeholder="Rule logic or identifier"></textarea>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeConstraintModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Constraint</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/js/app-admin.js"></script>


    <script src="/js/role-management.js"></script>
    <script src="/js/edit-role-functions.js"></script>
    <script src="/js/recurring-events.js"></script>
    <script src="/js/sample-data-manager.js"></script>
    <script src="/js/onboarding-wizard.js"></script>
    <script src="/js/onboarding-checklist.js"></script>
    <script src="/js/quick-start-videos.js"></script>
    <script src="/js/tutorial-overlays.js"></script>
    <script src="/js/feature-unlocks.js"></script>
    <script src="/js/sms-preferences.js"></script>
    <script src="/js/admin-sms-broadcast.js"></script>
    <script src="/js/app-user-v2.js"></script>
    <script src="/js/app-admin-analytics.js"></script>
    <script src="/js/app-admin-constraints.js"></script>
    <script>
        function toggleSidebar() {
            document.querySelector('.sidebar').classList.toggle('open');
        }
    </script>
</body>

</html>